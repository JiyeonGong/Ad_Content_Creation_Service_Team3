# model_config.yaml
# 이미지 생성 모델 설정 파일

models:
  # ========================================
  # 사전 양자화 8-bit 모델 (bitsandbytes) ⭐ 권장
  # ========================================
  # - 속도: ~77초/이미지 (1024x1024, 28 steps)
  # - GPU 메모리: ~21GB
  # - 품질: 99%+
  flux-dev-bnb-8bit:
    id: "diffusers/FLUX.1-dev-bnb-8bit"
    type: "flux-bnb-8bit"
    requires_auth: false
    params:
      default_steps: 28
      max_steps: 50
      use_negative_prompt: false
      guidance_scale: 3.5
      supports_i2i: true
      max_tokens: 512
      default_size: [1024, 1024]
      max_size: [2048, 2048]
    description: "FLUX.1-dev 8-bit 양자화 (77초/이미지, 권장)"

  # ========================================
  # GCP VM 전용 원본 모델 (CPU offload 필요)
  # ========================================
  # - 속도: ~50분/이미지
  # - GPU 메모리: CPU offload 사용
  # - 품질: 100%
  flux-dev-gcp:
    id: "/home/shared/FLUX.1-dev"
    type: "flux"
    requires_auth: false
    params:
      default_steps: 28
      max_steps: 50
      use_negative_prompt: false
      guidance_scale: 3.5
      supports_i2i: true
      max_tokens: 512
      default_size: [1024, 1024]
      max_size: [2048, 2048]
    description: "FLUX.1-dev 원본 (50분/이미지, 최고 품질)"

# ========================================
# 실행 설정
# ========================================
runtime:
  # 기본 모델 선택
  # - "flux-dev-bnb-8bit": 8-bit 양자화 (77초, 권장)
  # - "flux-dev-gcp": 원본 (50분, 최고 품질)
  primary_model: "flux-dev-bnb-8bit"

  # 프롬프트 최적화 설정
  prompt_optimization:
    enabled: true
    translate_korean: true
    max_length_by_model: true

  # 메모리 최적화 (원본 모델 사용 시 필요)
  memory:
    # CPU offload (원본 모델 사용 시 필수)
    enable_cpu_offload: true

    # Attention/VAE 최적화
    enable_attention_slicing: true
    enable_vae_slicing: true
