# model_config.yaml
# 이미지 생성 모델 설정 파일

models:
  # ========================================
  # GGUF 8-bit 모델 ⭐ 권장
  # ========================================
  # - 속도: ~77초/이미지 (1024x1024, 28 steps)
  # - GPU 메모리: ~21GB
  # - 품질: 99%+
  FLUX.1-dev-Q8:
    id: "/home/shared/flux1-dev-Q8_0.gguf"
    type: "flux-gguf"
    requires_auth: false
    params:
      default_steps: 28
      max_steps: 50
      use_negative_prompt: false
      guidance_scale: 3.5
      supports_i2i: true
      max_tokens: 512
      default_size: [1024, 1024]
      max_size: [2048, 2048]
    description: "FLUX.1-dev GGUF 8-bit 양자화 (권장)"

  # ========================================
  # GGUF 4-bit 모델
  # ========================================
  # - GPU 메모리: ~8GB
  # - 품질: 98%+
  FLUX.1-dev-Q4:
    id: "/home/shared/flux1-dev-Q4_0.gguf"
    type: "flux-gguf"
    requires_auth: false
    params:
      default_steps: 28
      max_steps: 50
      use_negative_prompt: false
      guidance_scale: 3.5
      supports_i2i: true
      max_tokens: 512
      default_size: [1024, 1024]
      max_size: [2048, 2048]
    description: "FLUX.1-dev GGUF 4-bit 양자화 (메모리 절약)"

  # ========================================
  # 이미지 편집 모델 (GGUF)
  # ========================================
  FLUX.1-Fill-dev-Q8_0:
    id: "/home/shared/FLUX.1-Fill-dev-Q8_0.gguf"
    type: "flux-gguf"
    requires_auth: false
    params:
      default_steps: 28
      max_steps: 50
      use_negative_prompt: false
      guidance_scale: 3.5
      supports_i2i: true
      max_tokens: 512
      default_size: [1024, 1024]
      max_size: [2048, 2048]
    description: "FLUX.1-Fill GGUF 8-bit (Inpainting/Outpainting)"

  Qwen-Image-Edit-2509:
    id: "/home/shared/qwen-image-edit"
    type: "qwen-image-edit"
    requires_auth: false
    params:
      default_steps: 28
      max_steps: 50
      use_negative_prompt: false
      guidance_scale: 3.5
      supports_i2i: true
      max_tokens: 512
      default_size: [1024, 1024]
      max_size: [2048, 2048]
    description: "Qwen Image Edit 2509 (정밀 이미지 편집)"

# ========================================
# 실행 설정
# ========================================
runtime:
  # 기본 모델 선택
  # - "FLUX.1-dev-Q4": 4-bit 양자화 (~8GB VRAM)
  # - "FLUX.1-dev-Q8": 8-bit 양자화 (77초, 권장)
  primary_model: "FLUX.1-dev-Q4"

  # 폴백 비활성화 (primary 실패 시 에러로 처리)
  enable_fallback: false

  # 프롬프트 최적화 설정
  prompt_optimization:
    enabled: true
    translate_korean: true
    max_length_by_model: true

  # 메모리 최적화 (원본 모델 사용 시 필요)
  memory:
    # CPU offload (원본 모델 사용 시 필수)
    enable_cpu_offload: true

    # Attention/VAE 최적화
    enable_attention_slicing: true
    enable_vae_slicing: true
